@charset "UTF-8";

@layer base, components, utilities;

@layer base {
  /**
   * $VARS
   */
  :root {
    /* light-dark() function to switch theme colors in CSS without MQs
     * currently only supported in Firefox 120
     * 
     * src: https://www.amitmerchant.com/the-new-light-dark-function-to-switch-theme-color-in-css/
     */
    color-scheme: light dark;
  }
  
  :root {
    /* $COLOURS */
    --color-alpha: 100%;
    /* Only support other alpha values if the users preference hasn't been set */
    @media screen and (prefers-reduced-transparency: no-preference ) {
      --color-faded: 82%;
      --color-tint:  36%;
    }

    --color-off-white:  0deg 0% 96%; /* background */
    --color-coal:       0deg 0% 16%; /* text */
    --color-oil:        0deg 0% 12%; /* dark mode decoration */
    --color-azure-blue: 211deg 100% 50%; /* light links */
    --color-sky-blue:   199deg 94% 67%; /* dark links */
    --color-graphite:   214deg 8% 51%; /* visited links */
    --color-turquoise:  151deg 83% 59%; /* success */
    --color-carnation:  0deg 90% 67%; /* error */
    --color-west-side:  32deg 100% 55%; /* warning */
    
    --color-bg-purple:  72, 5, 127;
    --color-bg-indigo:  159, 18, 159;
    --color-bg-pink:    223, 67, 138;
    --color-bg-yellow:  229, 145, 79;
    --color-bg-beige:   179, 167, 173;
    --color-bg-blue:    57, 120, 188;
    --color-bg-navy:    6, 1, 52;
    
    /* increase or reduce contrast
     * src: https://css-tricks.com/a-complete-guide-to-css-media-queries/#aa-prefers-contrast
     */
    @media screen and (prefers-contrast: high) {
      & {
        --color-off-white:  0deg 0 100%;
        --color-coal:       0deg 0% 0%;
        --color-azure-blue: 245deg 100% 50%;
        --color-sky-blue:   200deg 100% 50%;
      }
    }
    
    --color-text-hsl: var(--color-coal);
    --color-text: light-dark( hsl(var(--color-coal)/var(--color-alpha)), hsl(var(--color-off-white)/var(--color-alpha)));
    /* light-dark(#292929, #F6F6F6); */
    /* In Light Mode = return 1st value. 
       In Dark Mode = return 2nd value. */
    
    --color-sheet-hsl: var(--color-off-white);
    --color-sheet: light-dark( hsl(var(--color-off-white)/var(--color-alpha)), hsl(var(--color-coal)/var(--color-alpha)));
    /* light-dark(#F6F6F6, #292929); */
    /* In Light Mode = return 1st value. 
       In Dark Mode = return 2nd value. */
    
    --color-link-hsl: var(--color-azure-blue);
    --color-link: light-dark( hsl(var(--color-azure-blue)/var(--color-alpha)), hsl(var(--color-sky-blue)/var(--color-alpha)));
    /* light-dark(#007AFF, #5AC8FA); */
    /* In Light Mode = return 1st value. 
       In Dark Mode = return 2nd value. */
    
    /* $Spacing */
    --space-scale:  2;
    --space-base-s: 2rem;
    --space-base: max(1.5rem,min(calc(.5rem + 1.5vw),3rem));
    --space-xxs:  calc(var(--space-xs)/var(--space-scale));
    --space-xs:   calc(var(--space-s)/var(--space-scale));
    --space-s:    calc(var(--space-base-s)/var(--space-scale));
    --space-m:    var(--space-base);
    --space-l:    calc(var(--space-m)*var(--space-scale));
    --space-xl:   calc(var(--space-l)*var(--space-scale));
    --space-xxl:  calc(var(--space-xl)*var(--space-scale));

    /* $Text */
    --text-main: InterVariable, system-ui, sans-serif;
    --text-serif: "editorial-new", serif;
    --text-mono: "SFMono-Regular", monospace;
    
    --text-base:     max(1.6em,min(calc(.5em + 1vw),2.4em));
    --text-scale-s:  1.25;
    --text-scale-l:  1.333;
    --text-xxxs:     calc(var(--text-xxs)/var(--text-scale-s));
    --text-xxs:      calc(var(--text-xs)/var(--text-scale-s));
    --text-xs:       calc(var(--text-s)/var(--text-scale-s));
    --text-s:        calc(var(--text-m)/var(--text-scale-s));
    --text-m:        1em;
    --text-l:        calc(var(--text-m)*var(--text-scale-l));
    --text-xl:       calc(var(--text-l)*var(--text-scale-l));
    --text-xxl:      calc(var(--text-xl)*var(--text-scale-l));
    --text-xxxl:     calc(var(--text-xxl)*var(--text-scale-l));
    --text-xxxxl:    calc(var(--text-xxxl)*var(--text-scale-l));
    --text-poster:   clamp(4.5rem,8vw,10rem);
    --text-poster-l: clamp(5.5rem,9vw,12rem);
    
    --text-weight-l: 200; /* light */
    --text-weight-m: 400; /* medium */
    --text-weight-t: 600; /* thick */
    --text-weight:   var(--text-weight-m);
    
    --text-width-s: 75; /* small */
    --text-width-m: 100; /* medium */
    --text-width-l: 125; /* large */
    --text-width:   var(--text-width-m);
    
    --text-measure-xs: 15ch;
    --text-measure-s:  30ch;
    --text-measure-m:  45ch;
    --text-measure-l:  60ch;
    --text-measure-xl: 75ch;
    
    --text-leading-base:  1.1;
    --text-leading-scale: 1.25;
    --text-leading-xs:    calc(var(--text-leading-s)/var(--text-leading-scale));
    --text-leading-s:     var(--text-leading-base);
    --text-leading-m:     calc(var(--text-leading-s)*var(--text-leading-scale));
    --text-leading-l:     calc(var(--text-leading-m)*var(--text-leading-scale));
    --text-leading-fluid: calc(.75rem + 1.25em);
    
    --text-spacing-s:  -.025em;
    --text-spacing-m:  0;
    --text-spacing-l:  .1em;
    --text-spacing-xl: .3em;
    
    /* $animations */
    /* Only support animations if the users preference hasn't been set 
     * src: https://codepen.io/patrickhlauke/pen/YzPPdeo
     */
    @media screen and (prefers-reduced-motion: no-preference) {
      --timing-function: 200ms;
      --transition-1: cubic-bezier(0.2, 0, 0, 1);
      --transition-2: cubic-bezier(0.27, 0.175, 0.285, 1.01);
      --transition-3: cubic-bezier(.17,.89,.32,1.28);
      --transition-4: cubic-bezier(0.175, 0.885, 0.32, 1.275);
      --transition-5: cubic-bezier(0.25, 0.1, 0.25, 1);
    }
    
    /* opaqueness and transparency
     * supported in chrome, edge and opera
     * src: https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-transparency
     */
  }

  /* $RESET */
  *,*:before,*:after {
    box-sizing: border-box;
    padding: 0;
    margin: 0;
    
    &::selection {
      color: var(--color-sheet);
      /* color: light-dark(var(--color-sheet), var(--color-text)); */
      /* light-dark(#F6F6F6, #292929); */
      /* In Light Mode = return 1st value. 
         In Dark Mode = return 2nd value. */
      background-color: var(--color-text);
      /* background-color: light-dark(var(--color-text), var(--color-sheet)); */
      /* light-dark(#292929, #F6F6F6); */
      /* In Light Mode = return 1st value. 
         In Dark Mode = return 2nd value. */
    }
  }


  /**
   * $FONT-FACE
   */
  /**
  * It's important to define specific font-weights using the same font-family 
  * name in @font-face rules. Otherwise, browsers will apply faux bold to 
  * already boldened fonts as anything above 400 is considered as, for example: 
  * 'Medium', 'bold' or 'black' depending on the typeface.
  *
  * Good explainer: https://matthiasott.com/notes/the-right-way-to-use-fonts-com-web-fonts
  */
  /**
   * `prefers-reduced-data` is used to detect if the user has requested the web content that consumes less internet traffic.
   * 
   * src: https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-data
   */
  @media (prefers-reduced-data: no-preference) {}
  @font-face {
    font-family: InterVariable;
    font-style: normal;
    font-weight: 100 900;
    font-display: swap;
    src: local("Inter");
         /* , url('https://rsms.me/inter/font-files/Inter-Variable.woff2?v=4.0') format('woff2'); */
  }
  @font-face {
    font-family: InterVariable;
    font-style: italic;
    font-weight: 100 900;
    font-display: swap;
    src: local("Inter");
         /* , url('https://rsms.me/inter/font-files/Inter-Variable-Italic.woff2?v=4.0') format('woff2'); */
  }
  @font-face {
    font-family: "editorial-new";
    font-style: normal;
    font-weight: 100 900;
    font-display: swap;
    src: local("PP Editorial New"),
         url("https://pangrampangram.com/cdn/shop/files/PPEditorialNew-Variable.ttf?v=1823686619457303983") format("truetype");
  }
  @font-face {
    font-family: "editorial-new";
    font-style: italic;
    font-weight: 100 900;
    font-display: swap;
    src: local("PP Editorial New"),
         url("https://pangrampangram.com/cdn/shop/files/PPEditorialNew-ItalicVariable.ttf?v=16354667908536397326") format("truetype");
  }	
  @font-face {
    /* Replace emoji with text-style symbol */
    font-family: "NoEmoji";
    src: local("Apple Symbol"), local("Segoe UI Symbol"), local("Arial Unicode MS"), local("Menlo"), local("sans-serif");
    unicode-range: U+1F517;
  }

  /* $BASIC HOUSEKEEPING */
  html {
    scroll-behavior: smooth;
    background-color: var(--color-sheet);
    min-height: 100dvh;
    font-variation-settings: "wght" var(--text-weight), "wdth" var(--text-width);
    font-size: 10px;
  }
  
  body {
    min-height: 100dvh;
    font-family: var(--text-main);
    font-size:var(--text-base);
    line-height:var(--text-leading-fluid);
    -webkit-font-smoothing: antialiased;
    -webkit-font-feature-settings: "liga", "kern";
    font-feature-settings: "liga", "kern";
    color: var(--color-text);
    background-color: var(--color-sheet);
    flex-direction:column;
    align-items:stretch;
    display:flex;
    overflow-x:clip
  }

  /* Revert images and videos back if users set inverted colors */
  @media (inverted-colors) {
    img, video { 
      filter: invert(100%);
    }
  }

  :where(p,
  ul,
  ol,
  dl) {
    margin: 0 0 var(--space-s)0;
    font-weight: var(--text-weight-base)
  }
  ul {
    list-style-type: square;
    list-style-position: inside
  }
  ol {
    list-style-type: decimal;
    list-style-position: inside
  }
  li {
    position: relative;
    &:where(li+li) {
      margin: var(--space-xs)0 0 0
    }
    & :where(ul, ol) {
      margin-left: var(--space-m);
      font-size: var(--text-m)
    }
  }


  b,
  strong {
    --text-weight: 500
  }

  i,
  em {
    font-style: italic
  }

  small {
    font-size: var(--text-s)
  }


  :where(img,
  embed,
  object,
  svg,
  video) {
    line-height:var(--text-leading-fluid);
    max-width:100%;
    height:auto
  }

  /* $HEADINGS */
  :where(h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p,
  ul,
  ol,
  dl,
  li,
  pre,
  blockquote) {
    line-height: var(--text-leading-fluid)
  }

  h1 {
    margin: var(--space-xl)0 var(--space-m)0;
    font-size: var(--text-xxl);
    letter-spacing: var(--text-spacing-s);
  }
  h2 {
    margin: var(--space-l)0 var(--space-s)0;
    font-size: var(--text-xl);
    border-bottom: var(--border-weight-s)solid var(--color-text);
  }
  h3 {
    --text-weight:500;
    margin: var(--space-m)0 0 0;
    font-size: var(--text-l);
  }
  :where(h4,
  h5,
  h6) {
    --text-weight: 400;
    --text-width:  var(--text-width-s);
    margin: var(--space-s)0 0 0;
    font-size: var(--text-m);
  }
  h5,
  h6 {
    font-variant: small-caps;
    text-transform: lowercase;
    letter-spacing: 0.1em;
  }
  h6 {
    font-style: italic;
  }
  

  /* $LINKS */
  a,
  .fake-link {
    display: inline-grid;
    justify-items: center;
    color: var(--color-link);
    text-decoration-thickness: from-font;
    text-underline-offset: auto;
    transition:
      font-variation-settings var(--timing-function) var(--transition-1),
      text-decoration-thickness var(--timing-function) var(--transition-1),
      text-underline-offset var(--timing-function) var(--transition-1);
    
    &:hover {
      font-variation-settings: "wght" var(--text-weight-t), "wdth" var(--text-width);
      /* It seems you cannot animate text-underline-offset */
      text-underline-offset: 0.1em;  
    }
    /* Stop whole line shfting with animation
     * src: https://codepen.io/MrRoboto/pen/qBPobby
     */
    &::after {
      content: attr(data-text);
      font-variation-settings: "wght" var(--text-weight-t), "wdth" var(--text-width);
      visibility: hidden;
      height: 0;
    }
  }
  .fake-link {
    appearance: none;
    border: 0;
    background: none;
    font-family: inherit;
    font-size: inherit;
    text-decoration: underline;
    cursor: pointer;
  }
  .ninja-link:hover {
    font-variation-settings: "wght" var(--text-weight), "wdth" var(--text-width);
  }
/*   a:visited {
    color: hsl(var(--color-graphite));
  } */
}

@layer components {
  /* $DIALOGUES */
  dialog {
    visibility: visible;
    min-width: 100%;
    height: 90vh;
/*     margin: 0;
    overflow: visible; */
/*     position: fixed;
    right:  0;
    bottom: 0;
    left:   0; */
    pointer-events: auto;
    -webkit-overflow-scrolling: touch;
    border: 0;
    opacity: 1;
    transform-origin: bottom center;
    transform: translateY(0) scale(1);
    transition: var(--timing-function) var(--transition-5);
    will-change: transform;
    border-radius: 1.0rem 1.0rem 0 0;
    
    &[hidden] {
      opacity: 0;
      visibility: hidden;
      transform: translateY(100vh);
      pointer-events: none;
      user-select: none;
      touch-action: none;
      -webkit-touch-callout: none;
      -webkit-tap-highlight-color: transparent;
    }
    
    &::backdrop {
      background-color: rgb(0 0 0 / 0.3);
    }
  }
  
  /* $FORMS */
  form,
  fieldset {
    margin: 0;
    padding: 0;
    border: 0;
  }
  
  fieldset {
    overflow: hidden;
    display: flex;
    flex-direction: column;
    cursor: default;
    user-select: none;
  }
  
  .field {
    display: flex;
    align-items: baseline;
    margin-left: 1.6rem;
    padding: 1.0rem 0 1.1rem;
    line-height: 1.5;
    text-align: left;
    border-bottom-width: 0.1rem;
      
    &.--full {
      /* (47 * 3 = 141) = the height of To, Subject and From inputs */
      height: calc(100% - 14.1rem);
      flex-direction: column;
      align-items: flex-end;
      padding: 1.3rem 0 1.6rem;
      border-bottom-width: 0
    }
  }
  
  label {
    flex-basis: auto;
    align-self: center;
    font-weight: 700;
  }
  
  input,
  textarea {
    font-size: 1.6rem;
    line-height: 1.5;
    margin: 0;
    padding: 0;
    appearance: none;
    background: transparent;
    border: none;
    outline: none;
    
    &:invalid { box-shadow: none }
    &:invalid:not(:placeholder-shown) {}
  }
  
  input {
    flex-shrink: 1;
    flex-grow: 2;
    margin-left: 0.4rem;
    padding-right: 1.2rem;
    background-color: none;
  }
  
  textarea {
    width: 100%;
    flex: 1 1 auto;
    margin-bottom: 1.6rem;  
    padding-right: 1.6rem;
    border: none;
    resize: none;
  }
  
  .reciever {
    align-self: flex-start;
    /*margin-right: auto;*/
    margin-left: 0.4rem;
    border-radius: 0.3rem;
    
    & > a {
      text-decoration: none;
      color: currentcolor;
    }
  }
  
  .submit {
    --btn-margin: 0 1.6rem;
    --btn-padding: 1.2rem 0;
    --btn-font-size: 1.6rem;
    --btn-radius: 1.2rem;
    width: calc(100% - 1.6rem);
    height: 4.4rem;
    margin: var(--btn-margin);
    padding: var(--btn-padding);
    background: var(--color-azure-blue) / 0.66;
    border-radius: var(--btn-radius);
    appearance: none;
    cursor: pointer;
    user-select: none;
    -webkit-touch-callout: none;
  }
  
  .submit__label {
    font-size: 1.6rem;
  }
  
  /* $EXTERNAL-LINKS */
  a[href*="//"]::after {
    content: " ↗";
    display: inline-block;
    font-weight: inherit;
    font-style: inherit;
    font-size: .7em;
    line-height: 1;
    width: .8em;
    transform-origin: top right;
    transition: opacity var(--timing-function) var(--transition-2),
                transform var(--timing-function) var(--transition-3);
  }
  a:hover[href*="//"]::after {
    transform: scale(0.9) rotate(-6deg);
  }

  /* $PERMALINKS */
  a[href^="#"] {
    text-decoration: none;
    color: inherit;
  }
  a[href^="#"]:hover {
    text-decoration: underline;
  }
  h1 a[href^="#"]:before,
  h2 a[href^="#"]:before,
  h3 a[href^="#"]:before,
  h4 a[href^="#"]:before,
  h5 a[href^="#"]:before,
  h6 a[href^="#"]:before{
    content: "#";
    display: inline-block;
    font-size: .7em;
    line-height: 1;
    margin-left: -.8em;
    text-decoration: none;
    visibility: hidden;
    width: .8em;
    opacity: .3;
  }
  h1 a[href^="#"]:hover:before, 
  h2 a[href^="#"]:hover:before,
  h3 a[href^="#"]:hover:before,
  h4 a[href^="#"]:hover:before,
  h5 a[href^="#"]:hover:before,
  h6 a[href^="#"]:hover:before {
    visibility: visible;
  }

  /* $PAGE-HEADER */
  .page-header {
    width: 100%;
    overflow: visible;
    position: relative;
    z-index: 10;
    
    @media screen and (min-height: 10em) {
      & {
        position: sticky;
        top: 0;
      }
    }
  }

  .page-header > .wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 3.5rem;
    height: 56px 
  }

  /* $NAV-LOGO */
  .nav-logo {
    flex: 0 1 auto;
    align-self: center;
    margin-left: auto;
    margin-right: auto;
    text-decoration: none;
  }
  .nav-logo:hover { text-decoration: underline }
  .nav-title { margin: 0 }
  
  /* $CANVAS-BACKGROUND */
  canvas {
    display: block;
    width: 100vw;
    height: 100vh;
    position: fixed;
    inset: 0;
    z-index: -1;
    opacity: .66;
    user-select: none;
  }
}

@layer utilities {

  .text {
    &.--decorative {
      font-family: var(--text-serif);
      font-variation-settings: "wght" 300;
    }
  
    &.--size-xxxs { font-size: var(--text-xxxs); }
    &.--size-xxs { font-size: var(--text-xxs); }
    &.--size-xs { font-size: var(--text-xs); }
    &.--size-s { font-size: var(--text-s); }
    &.--size-m { font-size: var(--text-m); }
    &.--size-l { font-size: var(--text-l); }
    &.--size-xl { font-size: var(--text-xl); }
    &.--size-xxl { font-size: var(--text-xxl); }
    &.--size-xxxl { font-size: var(--text-xxxl); }
    &.--size-xxxxl { font-size: var(--text-xxxxl); }
    &.--size-poster { font-size: var(--text-poster); }
    &.--size-poster-l { font-size: var(--text-poster-l); }
  
    &.--weight-100 { --text-weight: 100; }
    &.--weight-200 { --text-weight: 200; }
    &.--weight-300 { --text-weight: 300; }
    &.--weight-400 { --text-weight: 400; }
    &.--weight-500 { --text-weight: 500; }
    &.--weight-600 { --text-weight: 600; }
    &.--weight-700 { --text-weight: 700; }
    &.--weight-800 { --text-weight: 800; }

    &.--measure-xs { max-width: var(--text-measure-xs); }
    &.--measure-s { max-width: var(--text-measure-s); }
    &.--measure-m { max-width: var(--text-measure-m); }
    &.--measure-l { max-width: var(--text-measure-l); }
    &.--measure-xl { max-width: var(--text-measure-xl); }

    &.--width-s { --text-width: var(--text-width-s); }
    &.--width-m { --text-width: var(--text-width-m); }
    &.--width-l { --text-width: var(--text-width-l); }

    &.--align-left { text-align: left; }
    &.--align-center { text-align: center; }
    &.--align-right { text-align: right; }

    &.--leading-xs { line-height: var(--text-leading-xs); }
    &.--leading-s { line-height: var(--text-leading-s); }
    &.--leading-m { line-height: var(--text-leading-m); }
    &.--leading-l { line-height: var(--text-leading-l); }
    &.--leading-fluid { line-height: var(--text-leading-fluid); }

    &.--spacing-s { letter-spacing: var(--text-spacing-s); }
    &.--spacing-m { letter-spacing: var(--text-spacing-m); }
    &.--spacing-l { letter-spacing: var(--text-spacing-l); }
    &.--spacing-xl { letter-spacing: var(--text-spacing-xl); }

    &.--italic { font-style: italic; }
    &.--uppercase { text-transform: uppercase; }
    &.--unlisted { list-style-type: none; }
    &.--undecorated { text-decoration: none; }
  }

  .layout {
    &.--center {
      width: 100vw;
      height: 100vh;
      display: grid;
      align-items: center;
      justify-content: center;
    }
  }
  
  .visually-hidden {
    border: 0;
    clip: rect(0 0 0 0);
    height: auto;
    margin: 0;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
    white-space: nowrap;
  }
}